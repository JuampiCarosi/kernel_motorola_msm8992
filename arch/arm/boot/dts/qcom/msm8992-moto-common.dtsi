/* Copyright (c) 2015, Motorola Mobility LLC. All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 and
 * only version 2 as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 */

#include "msm8992.dtsi"
#include "msm8992-pinctrl.dtsi"

/ {
	aliases {
		i2c4 = &i2c_4;
		i2c5 = &i2c_5;
		spi7 = &spi_7;
		uart0 = &blsp2_uart2;
	};

	bt_qca6174 {
		compatible = "qca,qca6174";
		qca,bt-reset-gpio = <&pm8994_gpios 19 0>; /* BT_EN */
		qca,bt-vdd-pa-supply = <&bt_vreg>;
		qca,bt-vdd-io-supply = <&pm8994_s4>;
		qca,bt-vdd-xtal-supply = <&pm8994_l30>;
		qca,bt-vdd-io-voltage-level = <1800000 1800000>;
		qca,bt-vdd-xtal-voltage-level = <1800000 1800000>;
	};
};

&tlmm_pinmux {
	pmx_i2c_4 {
		qcom,pins = <&gp 19>, <&gp 20>; /* SDA, SCL */
		qcom,num-grp-pins = <2>;
		qcom,pin-func = <4>;
		label = "pmx_i2c_4";

		i2c_4_active: i2c_4_active {
			drive-strength = <2>;
			bias-disable;
		};

		i2c_4_sleep: i2c_4_sleep {
			drive-strength = <2>;
			bias-disable;
		};
	};

	pmx_i2c_5_sda {
		qcom,pins = <&gp 23>;
		qcom,num-grp-pins = <1>;
		qcom,pin-func = <4>;
		label = "pmx_i2c_5_sda";

		i2c_5_sda_active: i2c_5_sda_active {
			drive-strength = <2>;
			bias-disable;
		};

		i2c_5_sda_sleep: i2c_5_sda_sleep {
			drive-strength = <2>;
			bias-disable;
		};
	};

	pmx_i2c_5_scl {
		qcom,pins = <&gp 24>;
		qcom,num-grp-pins = <1>;
		qcom,pin-func = <5>;
		label = "pmx_i2c_5_scl";

		i2c_5_scl_active: i2c_5_scl_active {
			drive-strength = <2>;
			bias-disable;
		};

		i2c_5_scl_sleep: i2c_5_scl_sleep {
			drive-strength = <2>;
			bias-disable;
		};
	};

	pmx_tfa9890_reset {
		qcom,pins = <&gp 39>;
		qcom,num-grp-pins = <1>;
		qcom,pin-func = <0>;
		label = "tfa9890-reset";

		tfa9890_reset_default: default {
			drive-strength = <2>;
			bias-disable; /* no pull */
			output-low;
		};
	};

	pmx_spi_7 {
		qcom,pins = <&gp 41 &gp 42 &gp 43 &gp 44>;
		qcom,num-grp-pins = <4>;
		qcom,pin-func = <1>;
		label = "spi_7";

		spi_7_active: active {
			drive-strength = <6>;
			bias-pull-up;
		};

		spi_7_sleep: sleep {
			drive-strength = <6>;
			bias-pull-up;
		};
	};

	pmx_florida_irq {
		qcom,pins = <&gp 72>;
		qcom,num-grp-pins = <1>;
		qcom,pin-func = <0>;
		label = "florida_irq";
		florida_irq_default: default {
			bias-disable;
			drive-strength = <2>;
		};
	};

	pmx_florida_reset {
		qcom,pins = <&gp 69>;
		qcom,num-grp-pins = <1>;
		qcom,pin-func = <0>;
		label = "florida_reset";
		florida_reset_default: default {
			output-high;
			bias-pull-up;
			drive-strength = <2>;
		};
	};

	pmx_nfc_irq {
		qcom,pins = <&gp 90>;
		qcom,num-grp-pins = <1>;
		qcom,pin-func = <0>;
		label = "nfc_irq";
		nfc_irq_default: default {
			bias-pull-down;
			drive-strength = <2>;
		};
	};

	pmx_stm401_out {
		qcom,pins = <&gp 107 &gp 68>;
		qcom,num-grp-pins = <2>;
		qcom,pin-func = <0>;
		label = "stm401_out";
		stm401_out_default: default {
			bias-disable;
			output-low;
			drive-strength = <2>;
		};
	};

	pmx_stm401_in {
		qcom,pins = <&gp 106 &gp 65 &gp 22>;
		qcom,num-grp-pins = <3>;
		qcom,pin-func = <0>;
		label = "stm401_in";
		stm401_in_default: default {
			bias-disable;
			drive-strength = <2>;
		};
	};

	pmx_hs_det_n {
		qcom,pins = <&gp 29>;
		qcom,num-grp-pins = <1>;
		qcom,pin-func = <0>;
		label = "hs-det-n";

		fsa8500_hs_det_default: fsa8500-hs-det {
			drive-strength = <2>;
			bias-pull-up; /* pull up */
		};
	};

	backlight_reset {
		qcom,pins = <&gp 11>;
		qcom,num-grp-pins = <1>;
		qcom,pin-func = <0>;
		label = "backlight_reset";
		backlight_reset_default: default {
			drive-strength = <2>;
			output-high;
		};
	};

	mipi_d0_select {
		qcom,pins = <&gp 108>;
		qcom,num-grp-pins = <1>;
		qcom,pin-func = <0>;
		label = "mipi_d0_select";
		mipi_d0_select_default: default {
			drive-strength = <2>;
			output-low;
		};
	};
};

&blsp1_uart2 {
	status= "ok";
	pinctrl-names = "default";
	pinctrl-0 = <&uart_console_sleep>;
};

&usb3 {
	status = "ok";
};

&hsphy0 {
	status = "ok";
};

&ssphy0 {
	status = "ok";
};

&usb_ehci {
	status = "ok";
	qcom,usb2-enable-uicc;
};

&qusb_phy {
	status = "ok";
};

&sdhc_1 {
	vdd-supply = <&pm8994_l20>;
	qcom,vdd-voltage-level = <2950000 2950000>;
	qcom,vdd-current-level = <200 570000>;

	vdd-io-supply = <&pm8994_s4>;
	qcom,vdd-io-always-on;
	qcom,vdd-io-voltage-level = <1800000 1800000>;
	qcom,vdd-io-current-level = <200 325000>;

	pinctrl-names = "active", "sleep";
	pinctrl-0 = <&sdc1_clk_on &sdc1_cmd_on &sdc1_data_on &sdc1_rclk_on>;
	pinctrl-1 = <&sdc1_clk_off &sdc1_cmd_off &sdc1_data_off &sdc1_rclk_off>;

	qcom,nonremovable;
	qcom,clk-rates = <400000 20000000 25000000 50000000 100000000 192000000 384000000>;
	qcom,bus-speed-mode = "HS400_1p8v", "HS200_1p8v", "DDR_1p8v";
	status = "ok";
};

&sdhc_2 {
	vdd-supply = <&pm8994_l21>;
	qcom,vdd-voltage-level = <2950000 2950000>;
	qcom,vdd-current-level = <200 800000>;

	vdd-io-supply = <&pm8994_l13>;
	qcom,vdd-io-voltage-level = <1800000 2950000>;
	qcom,vdd-io-current-level = <200 22000>;

	#address-cells = <0>;
	interrupt-parent = <&sdhc_2>;
	interrupts = <0 1 2>;
	#interrupt-cells = <1>;
	interrupt-map-mask = <0xffffffff>;
	interrupt-map = <0 &intc 0 125 0
			1 &intc 0 221 0
			2 &pm8994_gpios 22 0x3>;
	interrupt-names = "hc_irq", "pwr_irq", "status_irq";
	cd-gpios = <&pm8994_gpios 22 0x1>;

	pinctrl-names = "active", "sleep";
	pinctrl-0 = <&sdc2_clk_on &sdc2_cmd_on &sdc2_data_on>;
	pinctrl-1 = <&sdc2_clk_off &sdc2_cmd_off &sdc2_data_off>;

	qcom,clk-rates = <400000 20000000 25000000 50000000 100000000 200000000>;
	qcom,bus-speed-mode = "SDR12", "SDR25", "SDR50", "DDR50", "SDR104";
	status = "ok";
};

&blsp2_uart2 {
	status = "ok";
};

&pmi8994_haptics {
	status = "okay";
};

&pm8994_gpios {
	gpio@c200 { /* GPIO 3 - VOL_UP */
		status = "okay";
		qcom,mode = <0>;
		qcom,pull = <0>;
		qcom,vin-sel = <2>;
		qcom,src-sel = <0>;
		qcom,master-en = <1>;
	};

	gpio@c300 { /* GPIO 4 - EN_BST_BYP */
		status = "okay";
		qcom,mode = <1>; /* Output */
		qcom,pull = <5>; /* None */
		qcom,vin-sel = <2>;
		qcom,src-sel = <0>;
		qcom,out-strength = <1>;
		qcom,master-en = <1>;
	};

	gpio@c400 { /* GPIO 5 - DISP_V2_EN */
		status = "okay";
		qcom,mode = <1>; /* Output */
		qcom,pull = <5>; /* None */
		qcom,vin-sel = <2>;
		qcom,src-sel = <0>;
		qcom,out-strength = <1>;
		qcom,master-en = <1>;
	};

	gpio@c700 { /* GPIO 8 - FACT_KILL_DISABLE */
		status = "okay";
		qcom,mode = <1>; /* Output */
		qcom,pull = <5>; /* None */
		qcom,vin-sel = <2>;
		qcom,src-sel = <0>;
		qcom,out-strength = <1>;
		qcom,master-en = <1>;
	};

	gpio@c800 { /* GPIO 9 - WLAN_EXT_REG_EN */
		status = "okay";
		qcom,mode = <1>;         /* Digital output*/
		qcom,vin-sel = <2>;      /* VIN2 */
		qcom,src-sel = <0>;      /* GPIO */
		qcom,master-en = <1>;    /* Enable GPIO */
	};

	gpio@c900 { /* GPIO 10 - NFC_CLK_REQ */
		status = "okay";
		/* NFC clk request */
		qcom,mode = <0>;                /* QPNP_PIN_MODE_DIG_IN */
		qcom,pull = <5>;                /* QPNP_PIN_PULL_NO */
		qcom,vin-sel = <2>;             /* QPNP_PIN_VIN2 */
		qcom,src-sel = <2>;             /* QPNP_PIN_SEL_FUNC_1 */
		qcom,master-en = <1>;
	};

	gpio@ca00 { /* GPIO 11 - WLAN_EXT_REG_EN / AP_VIBE_EN */
		status = "okay";
		qcom,mode = <1>;         /* Digital output*/
		qcom,vin-sel = <2>;      /* VIN2 */
		qcom,src-sel = <0>;      /* GPIO */
		qcom,master-en = <1>;    /* Enable GPIO */
	};

	gpio@cc00 { /* GPIO 13 - NFC_ENABLE_N */
		status = "okay";
		qcom,mode = <1>; /* Output */
		qcom,pull = <5>; /* None */
		qcom,vin-sel = <2>;
		qcom,src-sel = <0>;
		qcom,out-strength = <1>;
		qcom,master-en = <1>;
	};

	gpio@cd00 { /* GPIO 14 - NFC_POWER_ON */
		status = "okay";
		qcom,mode = <1>; /* Output */
		qcom,pull = <5>; /* None */
		qcom,vin-sel = <2>;
		qcom,src-sel = <0>;
		qcom,out-strength = <1>;
		qcom,master-en = <1>;
	};

	gpio@ce00 { /* GPIO 15 - DIVCLK1_CODEC */
		status = "okay";
		qcom,mode = <1>;
		qcom,output-type = <0>;
		qcom,pull = <5>;
		qcom,vin-sel = <2>;
		qcom,out-strength = <1>;
		qcom,src-sel = <2>;
		qcom,master-en = <1>;
	};

	gpio@d100 { /* GPIO 18 - BT_WLAN_32KHZ_IN */
		status = "okay";
		qcom,mode = <1>;		/* Digital output */
		qcom,output-type = <0>;		/* CMOS logic */
		qcom,invert = <0>;		/* Output low initially */
		qcom,vin-sel = <2>;		/* VIN 2 */
		qcom,src-sel = <3>;		/* Function 2 */
		qcom,out-strength = <2>;	/* Medium */
		qcom,master-en = <1>;		/* Enable GPIO */
	};

	gpio@d200 { /* GPIO 19 - BT_EN */
		status = "okay";
		qcom,mode = <1>;         /* Digital output*/
		qcom,pull = <4>;         /* Pulldown 10uA */
		qcom,vin-sel = <2>;      /* VIN2 */
		qcom,src-sel = <0>;      /* GPIO */
		qcom,invert = <0>;       /* Invert */
		qcom,master-en = <1>;    /* Enable GPIO */
	};

	gpio@d500 { /* GPIO 22 - TRAY_DET */
		status = "okay";
		qcom,mode = <0>;
		qcom,pull = <0>; /* Up */
		qcom,vin-sel = <2>;
		qcom,src-sel = <0>;
		qcom,master-en = <1>;
	};
};

&pm8994_mpps {
	mpp@a300 { /* MPP 4 - USB_HM_DET_N */
		status = "okay";
		qcom,mode = <0>;		/* Digital Input */
		qcom,vin-sel = <2>;		/* S4 1.8V */
		qcom,pull = <1>;		/* QPNP_PIN_MPP_PULL_UP_OPEN */
		qcom,src-sel = <0>;		/* Constant */
		qcom,ain-route = <1>;		/* QPNP_PIN_AIN_AMUX_CH6 */
		qcom,master-en = <1>;		/* Enable GPIO */
	};

	mpp@a400 { /* MPP 5 - CCP_FAULT_EN */
		status = "okay";
		qcom,mode = <1>;		/* Digital Output */
		qcom,vin-sel = <2>;		/* S4 1.8V */
		qcom,src-sel = <0>;		/* Constant */
		qcom,master-en = <1>;		/* Enable GPIO */
	};

	mpp@a700 { /* MPP 8 - LED_SOL_SINK */
		status = "okay";
		qcom,mode = <6>;		/* QPNP_PIN_MODE_SINK */
		qcom,master-en = <1>;		/* Enable GPIO */
	};
};

&pmi8994_gpios {
	gpio@c400 {	/* GPIO 5  OTG SWITCH EN */
		qcom,mode = <1>;	/* DIGITAL OUT */
		qcom,pull = <5>;	/* No Pull */
		qcom,vin-sel = <2>;	/* 1.8 */
		qcom,src-sel = <0>;	/* GPIO */
		qcom,master-en = <1>;	/* ENABLE GPIO */
		status = "okay";
	};

	gpio@c400 { /* GPIO 5 - FACT_CBL_DET */
		status = "okay";
		qcom,mode = <0>;        /* QPNP_PIN_MODE_DIG_IN */
		qcom,pull = <5>;        /* QPNP_PIN_PULL_NO */
		qcom,vin-sel = <2>;     /* QPNP_PIN_VIN2 */
		qcom,src-sel = <0>;     /* QPNP_PIN_SEL_FUNC_CONSTANT */
		qcom,master-en = <1>;
	};

	gpio@c500 { /* GPIO 6 - REQ_5V_BST */
		status = "okay";
		qcom,mode = <1>;         /* QPNP_PIN_MODE_DIG_OUT */
		qcom,output-type = <0>;  /* QPNP_PIN_OUT_BUF_CMOS */
		qcom,vin-sel = <2>;      /* QPNP_PIN_VIN2 */
		qcom,src-sel = <0>;      /* QPNP_PIN_SEL_FUNC_CONSTANT */
		qcom,out-strength = <1>; /* QPNP_PIN_OUT_STRENGTH_LOW */
		qcom,master-en = <1>;
	};
};

&pmi8994_mpps {
	mpp@a300 { /* MPP 4 */
		/* WLED FET */
		qcom,mode = <1>;	/* DIGITAL OUT */
		qcom,vin-sel = <0>;	/* VIN0 */
		qcom,master-en = <1>;
		status = "okay";
	};
};

&spmi_bus {
	qcom,pmi8994@3 {
		qcom,haptic@c000 {
			status = "disabled";
		};

		qcom,leds@d000 {
			status = "disabled";
		};
	};
};

&pcie0 {
	status = "disable";
};

&soc {
	vreg_5p0: vreg_5v {
		compatible = "regulator-fixed";
		regulator-name = "vreg_5p0";
		gpio = <&pmi8994_gpios 6 0>;
	};

	dummy_vreg: dummy_vreg {
		compatible = "regulator-fixed";
		status = "ok";
		regulator-name = "dummy_vreg";
		regulator-always-on;
	};

	factory_support {
		compatible = "mmi,factory-support-kungpow";
		gpios = <&pm8994_gpios 8 0x0>, /* GPIOF_OUT_INIT_LOW */
			<&pmi8994_gpios 5 0x1>, /* GPIOF_IN */
			<&msm_gpio 34 0x1>; /* GPIOF_IN */
		gpio-names = "factory_kill_disable",
			"factory_cable_detect",
			"factory_warn";
	};

	hob_ram {
		compatible = "mmi,hob_ram";
		mmi,allocation-type-smem;
	};

	qcom,cci@fda0c000 {
		pinctrl-0 = <&cci0_active>;
		pinctrl-1 = <&cci0_suspend>;
		gpios = <&msm_gpio 17 0>,
			<&msm_gpio 18 0>;
	};

	i2c_4: i2c@f9926000 { /* BLSP1 QUP3 */
		compatible = "qcom,i2c-msm-v2";
		#address-cells = <1>;
		#size-cells = <0>;
		reg-names = "qup_phys_addr", "bam_phys_addr";
		reg = <0xf9926000 0x1000>,
		      <0xf9904000 0x19000>;
		interrupt-names = "qup_irq", "bam_irq";
		interrupts = <0 98 0>, <0 238 0>;
		qcom,clk-freq-out = <400000>;
		qcom,clk-freq-in  = <19200000>;
		clock-names = "iface_clk", "core_clk";
		clocks = <&clock_gcc clk_gcc_blsp1_ahb_clk>,
			 <&clock_gcc clk_gcc_blsp1_qup4_i2c_apps_clk>;

		pinctrl-names = "i2c_active", "i2c_sleep";
		pinctrl-0 = <&i2c_4_active>;
		pinctrl-1 = <&i2c_4_sleep>;
		qcom,noise-rjct-scl = <0>;
		qcom,noise-rjct-sda = <0>;
		qcom,bam-pipe-idx-cons = <18>;
		qcom,bam-pipe-idx-prod = <19>;
		qcom,bam-disable;
		qcom,master-id = <86>;
	};

	i2c_5: i2c@f9927000 { /* BLSP1 QUP5 */
		compatible = "qcom,i2c-msm-v2";
		#address-cells = <1>;
		#size-cells = <0>;
		reg-names = "qup_phys_addr", "bam_phys_addr";
		reg = <0xf9927000 0x1000>,
		      <0xf9904000 0x19000>;
		interrupt-names = "qup_irq", "bam_irq";
		interrupts = <0 99 0>, <0 238 0>;
		qcom,clk-freq-out = <100000>;
		qcom,clk-freq-in  = <19200000>;
		clock-names = "iface_clk", "core_clk";
		clocks = <&clock_gcc clk_gcc_blsp1_ahb_clk>,
			 <&clock_gcc clk_gcc_blsp1_qup5_i2c_apps_clk>;

		pinctrl-names = "i2c_active", "i2c_sleep";
		pinctrl-0 = <&i2c_5_sda_active &i2c_5_scl_active>;
		pinctrl-1 = <&i2c_5_sda_sleep &i2c_5_scl_sleep>;
		qcom,noise-rjct-scl = <0>;
		qcom,noise-rjct-sda = <0>;
		qcom,bam-pipe-idx-cons = <16>;
		qcom,bam-pipe-idx-prod = <17>;
		qcom,master-id = <86>;

		stm401@39 {
			compatible = "stm,stm401";
			reg = <0x39>;
			gpios = <&msm_gpio 22 0>,      /* IRQ          */
				<&pm8994_mpps 5 0>,     /* RESET        */
				<&msm_gpio 107 0>,       /* BSLEN        */
				<&msm_gpio 65 0>,       /* WakeIRQ      */
				<&msm_gpio 68 0>,       /* SH Wake      */
				<&msm_gpio 106 0>;       /* SH Wake Resp */
			lux_table = <5 50 100 1500 3000 8000>;
			brightness_table = <9 14 18 46 67 93 140>;
			bslen_pin_active_value = <1>;
			ct406_detect_threshold = <0x006E>;
			ct406_undetect_threshold = <0x0050>;
			ct406_recalibrate_threshold = <0x0064>;
			ct406_pulse_count = <0x04>;
			sensor1-supply = <&pm8994_lvs2>;
			sensor2-supply = <&pm8994_l17>;

			pinctrl-names = "default";
			pinctrl-0 = <&stm401_out_default &stm401_in_default>;
		};
	};

	spi_7: spi@f9963000 { /* BLSP2 QUP1 */
		compatible = "qcom,spi-qup-v2";
		#address-cells = <1>;
		#size-cells = <0>;
		reg-names = "spi_physical", "spi_bam_physical";
		reg = <0xf9963000 0x1000>,
			<0xf9944000 0x19000>;
		interrupt-names = "spi_irq", "spi_bam_irq";
		interrupts = <0 101 0>, <0 239 0>;
		spi-max-frequency = <19200000>;
		qcom,infinite-mode = <0>;
		qcom,use-bam;
		qcom,ver-reg-exists;
		qcom,bam-consumer-pipe-index = <12>;
		qcom,bam-producer-pipe-index = <13>;
		qcom,master-id = <84>;
		qcom,use-pinctrl;
		pinctrl-names = "default", "sleep";
		pinctrl-0 = <&spi_7_active>;
		pinctrl-1 = <&spi_7_sleep>;

		clock-names = "iface_clk", "core_clk";

		clocks = <&clock_gcc clk_gcc_blsp2_ahb_clk>,
			 <&clock_gcc clk_gcc_blsp2_qup1_spi_apps_clk>;
	};

	gpio_keys {
		compatible = "gpio-keys";
		input-name = "gpio-keys";

		vol_up {
			label = "volume_up";
			gpios = <&pm8994_gpios 3 0x1>;
			linux,input-type = <1>;
			linux,code = <115>;
			gpio-key,wakeup;
			debounce-interval = <15>;
		};
	};

	slim_msm: slim@fe12f000 {
		/delete-node/ tomtom_codec;
		wolfson_codec {
			compatible = "wlf,florida-slim-audio";
			elemental-addr = [00 7F 10 51 2F 01];
		};
	};

	sound {
		qcom,model = "msm8994-tomtom-mtp-snd-card";

		qcom,audio-routing =
			"AIF4 VI", "MCLK",
			"RX_BIAS", "MCLK",
			"LDO_H", "MCLK",
			"MADINPUT", "MCLK",
			"ultrasound amp", "LINEOUT1",
			"ultrasound amp", "LINEOUT3",
			"AMIC1", "MIC BIAS1 Internal1",
			"MIC BIAS1 Internal1", "Handset Mic",
			"AMIC2", "MIC BIAS2 External",
			"MIC BIAS2 External", "Headset Mic",
			"AMIC3", "MIC BIAS2 External",
			"MIC BIAS2 External", "ANCRight Headset Mic",
			"AMIC4", "MIC BIAS2 External",
			"MIC BIAS2 External", "ANCLeft Headset Mic",
			"AMIC5", "MIC BIAS3 External",
			"MIC BIAS3 External", "Analog Mic5",
			"AMIC6", "MIC BIAS4 External",
			"MIC BIAS4 External", "Analog Mic6",
			"DMIC1", "MIC BIAS1 External",
			"MIC BIAS1 External", "Digital Mic1",
			"DMIC2", "MIC BIAS1 External",
			"MIC BIAS1 External", "Digital Mic2",
			"DMIC3", "MIC BIAS3 External",
			"MIC BIAS3 External", "Digital Mic3",
			"DMIC4", "MIC BIAS3 External",
			"MIC BIAS3 External", "Digital Mic4",
			"DMIC5", "MIC BIAS4 External",
			"MIC BIAS4 External", "Digital Mic5",
			"DMIC6", "MIC BIAS4 External",
			"MIC BIAS4 External", "Digital Mic6";

		qcom,us-euro-gpios = <&pm8994_mpps 2 0>;
		qcom,cdc-micbias2-headset-only;
		qcom,mbhc-audio-jack-type = "6-pole-jack";
		qcom,ext-ult-spk-amp-gpio = <&pmi8994_gpios 1 0>;
		qcom,hdmi-audio-rx;
		asoc-codec = <&stub_codec>, <&hdmi_audio>;
		asoc-codec-names = "msm-stub-codec.1", "msm-hdmi-audio-codec-rx";
	};

	qcom,cnss {
		wlan-112 = <&msm_gpio 112 0>;
	};
};

&spi_0 {
	florida@0 {
		compatible = "wlf,wm8280";
		spi-max-frequency = <9600000>;
		spi-cs-high;
		reg = <0x0>;
		interrupt-parent = <&msm_gpio>;
		interrupts = <72 0>;
		irq-base = <800>;
		gpio-base = <200>;
		wlf,reset = <&msm_gpio 69 0>;
		wlf,irq = <&msm_gpio 72 0>;

		pinctrl-names = "default";
		pinctrl-0 = <&florida_irq_default &florida_reset_default>;

		AVDD-supply = <&pm8994_s4>;
		DCVDD-supply = <&pm8994_l11>;
		DBVDD1-supply = <&pm8994_s4>;
		DBVDD2-supply = <&pm8994_s4>;
		DBVDD3-supply = <&pm8994_s4>;
		CPVDD-supply = <&pm8994_s4>;
		SPKVDDL-supply = <&dummy_vreg>;
		SPKVDDR-supply = <&dummy_vreg>;

		gpio-controller;
		#gpio-cells = <2>;

		gpio-defaults = <0x00002102
				0xffffffff
				0x00010000
				0x00000004
				0xffffffff>;

	};
};

&i2c_11 {
	fsa8500@23 {
		compatible = "fairchild,fsa8500";
		reg = <0x23>;
		gpios = <&msm_gpio 29 0x0>;
		hs_det_vdd-supply = <&dummy_vreg>; /* Connected to B+ */
		hs_det_micvdd-supply = <&pm8994_s4>;
		fsa8500-init-regs = <0x0C 0xA1>,
				    <0x0F 0xF9>,
				    <0x11 0x84>,
				    <0x13 0xBF>,
				    <0x14 0x69>;

		fsa8500-keymap = <0x4000000 0xE2>, /* SND_JACK_BTN_0 - KEY_MEDIA */
				 <0x0400000 0x246>, /* SND_JACK_BTN_4 - KEY_VOICECOMMAND */
				 <0x0200000 0x73>, /* SND_JACK_BTN_5 - KEY_VOLUMEUP */
				 <0x0100000 0x72>; /* SND_JACK_BTN_6 - KEY_VOLUMEDOWN */

		pinctrl-names = "default";
		pinctrl-0 = <&fsa8500_hs_det_default>;
	};

	bcm2079x@76 {
		compatible = "brcm,bcm2079x";
		reg = <0x76>;
		interrupt-parent = <&msm_gpio>;
		interrupts = <90 0>; /* NFC_IRQ */
		gpios = <&pm8994_gpios 13 0>, /* NFC_ENABLE_N */
			<&msm_gpio 90 0>, /* NFC_IRQ */
			<&pm8994_gpios 14 0>; /* NFC_POWER_ON */

		pinctrl-names = "default";
		pinctrl-0 = <&nfc_irq_default>;
	};

	drv2605@5a {
		compatible = "ti,drv2605";
		reg = <0x5a>;
		gpios = <&pm8994_gpios 11 0>;        /* EN_GPIO */
		external_trigger = <2>;
		default_effect = <17>;          /* Strong Click 100% */
		rated_voltage = <0x70>;         /* 2.4v */
		overdrive_voltage = <0x89>;     /* 3.0v */

		vibrator_vdd-supply = <&vreg_5p0>;
	};

	tfa9890@34 {
		compatible = "nxp,tfa9890";
		reg = <0x34>;
		gpios = <&msm_gpio 39 0>;     /* RESET */
		tfa_vdd-supply = <&pm8994_s4>;
		nxp,tfa_max-vol-steps = <15>;
		nxp,tfa-dev = "left";

		pinctrl-names = "default";
		pinctrl-0 = <&tfa9890_reset_default>;
	};

	tfa9890@35 {
		compatible = "nxp,tfa9890";
		reg = <0x35>;
		tfa_vdd-supply = <&pm8994_s4>;
		nxp,tfa_max-vol-steps = <15>;
		nxp,tfa-dev = "right";
	};
};

&pm8994_vadc {
	chan@5 {
		label = "vcoin";
		reg = <5>;
		qcom,decimation = <0>;
		qcom,pre-div-channel-scaling = <1>;
		qcom,calibration-type = "absolute";
		qcom,scale-function = <0>;
		qcom,hw-settle-time = <0>;
		qcom,fast-avg-setup = <0>;
	};

	chan@7 {
		label = "vph_pwr";
		reg = <7>;
		qcom,decimation = <0>;
		qcom,pre-div-channel-scaling = <1>;
		qcom,calibration-type = "absolute";
		qcom,scale-function = <0>;
		qcom,hw-settle-time = <0>;
		qcom,fast-avg-setup = <0>;
	};

	chan@73 {
		label = "msm_therm";
		reg = <0x73>;
		qcom,decimation = <0>;
		qcom,pre-div-channel-scaling = <0>;
		qcom,calibration-type = "ratiometric";
		qcom,scale-function = <2>;
		qcom,hw-settle-time = <2>;
		qcom,fast-avg-setup = <0>;
	};

	chan@74 {
		label = "emmc_therm";
		reg = <0x74>;
		qcom,decimation = <0>;
		qcom,pre-div-channel-scaling = <0>;
		qcom,calibration-type = "ratiometric";
		qcom,scale-function = <2>;
		qcom,hw-settle-time = <2>;
		qcom,fast-avg-setup = <0>;
	};

	chan@75 {
		label = "pa_therm0";
		reg = <0x75>;
		qcom,decimation = <0>;
		qcom,pre-div-channel-scaling = <0>;
		qcom,calibration-type = "ratiometric";
		qcom,scale-function = <2>;
		qcom,hw-settle-time = <2>;
		qcom,fast-avg-setup = <0>;
	};

	chan@77 {
		label = "pa_therm1";
		reg = <0x77>;
		qcom,decimation = <0>;
		qcom,pre-div-channel-scaling = <0>;
		qcom,calibration-type = "ratiometric";
		qcom,scale-function = <2>;
		qcom,hw-settle-time = <2>;
		qcom,fast-avg-setup = <0>;
	};

	chan@78 {
		label = "quiet_therm";
		reg = <0x78>;
		qcom,decimation = <0>;
		qcom,pre-div-channel-scaling = <0>;
		qcom,calibration-type = "ratiometric";
		qcom,scale-function = <2>;
		qcom,hw-settle-time = <2>;
		qcom,fast-avg-setup = <0>;
	};
};

&pm8994_adc_tm {
	chan@73 {
		label = "msm_therm";
		reg = <0x73>;
		qcom,decimation = <0>;
		qcom,pre-div-channel-scaling = <0>;
		qcom,calibration-type = "ratiometric";
		qcom,scale-function = <2>;
		qcom,hw-settle-time = <2>;
		qcom,fast-avg-setup = <0>;
		qcom,btm-channel-number = <0x48>;
		qcom,thermal-node;
	};

	chan@74 {
		label = "emmc_therm";
		reg = <0x74>;
		qcom,decimation = <0>;
		qcom,pre-div-channel-scaling = <0>;
		qcom,calibration-type = "ratiometric";
		qcom,scale-function = <2>;
		qcom,hw-settle-time = <2>;
		qcom,fast-avg-setup = <0>;
		qcom,btm-channel-number = <0x68>;
		qcom,thermal-node;
	};

	chan@75 {
		label = "pa_therm0";
		reg = <0x75>;
		qcom,decimation = <0>;
		qcom,pre-div-channel-scaling = <0>;
		qcom,calibration-type = "ratiometric";
		qcom,scale-function = <2>;
		qcom,hw-settle-time = <2>;
		qcom,fast-avg-setup = <0>;
		qcom,btm-channel-number = <0x70>;
		qcom,thermal-node;
	};

	chan@77 {
		label = "pa_therm1";
		reg = <0x77>;
		qcom,decimation = <0>;
		qcom,pre-div-channel-scaling = <0>;
		qcom,calibration-type = "ratiometric";
		qcom,scale-function = <2>;
		qcom,hw-settle-time = <2>;
		qcom,fast-avg-setup = <0>;
		qcom,btm-channel-number = <0x78>;
		qcom,thermal-node;
	};

	chan@78 {
		label = "quiet_therm";
		reg = <0x78>;
		qcom,decimation = <0>;
		qcom,pre-div-channel-scaling = <0>;
		qcom,calibration-type = "ratiometric";
		qcom,scale-function = <2>;
		qcom,hw-settle-time = <2>;
		qcom,fast-avg-setup = <0>;
		qcom,btm-channel-number = <0x80>;
		qcom,thermal-node;
	};
};

&pmi8994_vadc {
	chan@0 {
		label = "usbin";
		reg = <0>;
		qcom,decimation = <0>;
		qcom,pre-div-channel-scaling = <4>;
		qcom,calibration-type = "absolute";
		qcom,scale-function = <0>;
		qcom,hw-settle-time = <0>;
		qcom,fast-avg-setup = <0>;
	};

	chan@1 {
		label = "dcin";
		reg = <1>;
		qcom,decimation = <0>;
		qcom,pre-div-channel-scaling = <4>;
		qcom,calibration-type = "absolute";
		qcom,scale-function = <0>;
		qcom,hw-settle-time = <0>;
		qcom,fast-avg-setup = <0>;
	};

	chan@43 {
		label = "usb_dp";
		reg = <0x43>;
		qcom,decimation = <0>;
		qcom,pre-div-channel-scaling = <1>;
		qcom,calibration-type = "absolute";
		qcom,scale-function = <0>;
		qcom,hw-settle-time = <0>;
		qcom,fast-avg-setup = <0>;
	};

	chan@44 {
		label = "usb_dm";
		reg = <0x44>;
		qcom,decimation = <0>;
		qcom,pre-div-channel-scaling = <1>;
		qcom,calibration-type = "absolute";
		qcom,scale-function = <0>;
		qcom,hw-settle-time = <0>;
		qcom,fast-avg-setup = <0>;
	};
};

&pm8994_lvs2 {
	regulator-always-on;
};

&pm8994_l14 {
	regulator-always-on;
};
